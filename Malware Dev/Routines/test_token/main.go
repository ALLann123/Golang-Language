package main

import (
	"bufio"
	"fmt"
	"log"
	"os"

	tgbotapi "github.com/go-telegram-bot-api/telegram-bot-api/v5"
)

func main() {
	file, err := os.Open("token.txt")
	if err != nil {
		log.Fatal("Error Opening file: ", err)
	}

	defer file.Close()

	scanner := bufio.NewScanner(file)

	for scanner.Scan() {
		token := scanner.Text()

		//skip empty lines
		if token == "" {
			continue
		}

		//Testing
		fmt.Printf("Testing token: %s\n", token)

		bot, err := tgbotapi.NewBotAPI(token)
		if err != nil {
			fmt.Printf("\nInvalid token: %s \n Error: %v\n\n", token, err)
			continue
		} else {
			fmt.Printf("Valid Token: %s\n Botname: %v\n\n", token, bot.Self.UserName)
			break
		}

	}
	if err := scanner.Err(); err != nil {
		log.Fatal("Scanner error:", err)
	}

}
